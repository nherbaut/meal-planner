<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Meal planning - semaines disponibles</title>
    <style>
      :root { color-scheme: light; }
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
      .wrap { max-width: 980px; margin: 0 auto; }
      h1 { font-size: 22px; margin: 0 0 14px 0; }
      .card { border: 1px solid #e5e5e5; border-radius: 12px; padding: 16px; box-shadow: 0 1px 0 rgba(0,0,0,0.04); }
      ul { margin: 0; padding-left: 18px; }
      a { text-decoration: none; }
      a:hover { text-decoration: underline; }
      .hint { color: #555; font-size: 13px; margin-top: 12px; }
      .new { margin-top: 14px; display: flex; gap: 8px; align-items: center; }
      input { padding: 10px 12px; border: 1px solid #ddd; border-radius: 10px; width: 180px; }
      button { padding: 10px 12px; border: 1px solid #ddd; border-radius: 10px; background: #f7f7f7; cursor: pointer; }
      button:hover { background: #efefef; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1>Semaines disponibles</h1>

      <div class="card">
        {% if dates|length == 0 %}
          <p>Aucun planning stocké.</p>
        {% else %}
          <ul>
            {% for d in dates %}
              <li>
                <a href="/meal-planning/{{ d }}">{{ d }}</a>
                <span class="hint" style="margin-left:6px;">· <a href="/meal-planning/{{ d }}/shopping-list">Liste de courses</a></span>
              </li>
            {% endfor %}
          </ul>
        {% endif %}

        <div class="new">
          <input id="monday" placeholder="YYYY-MM-DD" inputmode="numeric" />
          <button id="go">Ouvrir / créer</button>
        </div>
        <div class="hint">Saisir la date du lundi (YYYY-MM-DD). Si aucun planning n’existe, la page permet de coller le JSON.</div>
      </div>
    </div>

    <script>
      const monday = document.getElementById("monday");
      const go = document.getElementById("go");
      go.addEventListener("click", () => {
        const v = (monday.value || "").trim();
        if (!v) return;
        window.location.href = "/meal-planning/" + encodeURIComponent(v);
      });
    </script>
  </body>
</html>
